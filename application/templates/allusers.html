{% extends 'layout.html' %}
{% block content %}
<div class="page-header">
    <h2 class="display-4">All Users</h2>
</div>
<br/>

    {% if users|length == 0 %}
        <h4>No users yet.</h4>
    {% endif %}

    <div class="card-columns">
        {% for user in users %}
            <div class="card mb-4">
                <div class="card-body">
                    <h2 class="card-title" style="text-transform:capitalize;">
                        {{ user.first_name + " " + user.last_name }}
                    </h2>
                    <p></p>
                    <p class="card-text">
                    <div class="row">
                        <div class="col">
                            <h5>ID</h5>
                            <h5 id="user_id">{{ user.user_id}}</h5>
                        </div>
                        <div class="col">
                            <h5>Email</h5>{{ user.email }}
                        </div>
                    </div>
                    <p></p>
                    <div class="modal fade" id="changepwdform{{user.user_id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                    aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                            <div class="modal-header text-center">
                                <h4 class="modal-title w-100 font-weight-bold">Change Password</h4>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <form action="{{ url_for('all_users.changepassword', user_id = user.user_id) }}" method="POST" novalidate>
                                {{ update_pwd_form.hidden_tag() }}
                                <div class="form-group {% if update_pwd_form.password.errors %} has-danger {% endif %} adminpwd">
                                    {{ update_pwd_form.password.label }}
                                    {% if update_pwd_form.password.errors %}
                                        {{ update_pwd_form.password(class='form-control is-invalid') }}
                                    {% else %}
                                        {{ update_pwd_form.password(class='form-control') }}
                                    {% endif %}
                                    {% for error in update_pwd_form.password.errors %}
                                        <div class="invalid-feedback">{{ error }}</div>
                                    {% endfor %}
                                </div>
                                <div class="form-group {% if update_pwd_form.confirmPassword.errors %} has-danger {% endif %} adminpwd">
                                    {{ update_pwd_form.confirmPassword.label }}
                                    {% if update_pwd_form.confirmPassword.errors %}
                                        {{ update_pwd_form.confirmPassword(class='form-control is-invalid') }}
                                    {% else %}
                                        {{ update_pwd_form.confirmPassword(class='form-control') }}
                                    {% endif %}
                                    {% for error in update_pwd_form.confirmPassword.errors %}
                                        <div class="invalid-feedback">{{ error }}</div>
                                    {% endfor %}
                                </div>
                                <div class="adminpwd adminsub">
                                    {{ update_pwd_form.submit(value='Submit', class='btn btn-primary') }}
                                </div>
                                
                            </form>
                            </div>
                        </div>
                    </div>
                    <a href="" class="btn btn-primary" data-toggle="modal" data-target="#changepwdform{{user.user_id}}">Change Password</a>
                    <a href="{{ url_for('all_users.deleteuser', user_id = user.user_id)}}" class="btn btn-dark">Delete</a>
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock %}