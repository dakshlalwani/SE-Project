{% extends "layout.html" %}
{% block content %}

    <div class="card mb-5 small-card mx-auto" id="search-card">
        <div class="card-header">
            <ul class="nav nav-tabs card-header-tabs pull-right" id="myTab" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="search-tab" data-toggle="tab" href="#search" role="tab"
                       aria-controls="home" aria-selected="true">Search</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="img-search-tab" data-toggle="tab" href="#img-search" role="tab"
                       aria-controls="contact" aria-selected="false">Image Search</a>
                </li>
            </ul>
        </div>
        <div class="card-body pb-2 px-4 px-sm-3">
            <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="search" role="tabpanel" aria-labelledby="search-tab">
                    <div id="normal-search">
                        <form name="searchForm" action="{{ url_for('index') }}" method="POST" novalidate>
                            {{ form.hidden_tag() }}
                            <input type="text" name="search_type" value="simple" hidden>
                            <div class="input-group mb-2 mt-2">
                                <input type="text" class="form-control" placeholder="Enter Search Query"
                                       aria-label="Search Query" id="query" name="query">
                                <div class="input-group-append">
                                    <button class="btn btn-primary" value="submit" type="submit"><i
                                            class="fas fa-search text-light"></i></button>
                                </div>
                            </div>
                        </form>
                        <div class="text-right">
                            <button id="show-adv-search" class="btn btn-link"><i class="fas fa-angle-down"
                                                                                 style="font-size: 24px"></i></button>
                        </div>
                    </div>
                    <div id="advanced-search">
                        <form name="searchForm" action="{{ url_for('index') }}" method="POST" novalidate>
                            {{ form.hidden_tag() }}
                            <input type="text" name="search_type" value="adv" hidden>
                            <div class="input-group mb-3 mt-2">
                                <input type="text" class="form-control" placeholder="Enter Search Query"
                                       aria-label="Search Query" id="query" name="query">
                                <div class="input-group-append">
                                    <button class="btn btn-primary" value="submit" type="submit"><i
                                            class="fas fa-search text-light"></i></button>
                                </div>
                            </div>
                            <div class="row pl-1 pr-1">
                                <div class="col-xs-12 col-sm-3">
                                    <h5 class="pl-1 pl-sm-3 mb-3">Type</h5>
                                    <div class="form-group mx-5 mx-sm-2">
                                        {% for type in types %}
                                            <div class="custom-control custom-switch">
                                                <input type="checkbox" class="custom-control-input"
                                                       id="{{ type }}-check" name="types" value="{{ type }}"
                                                       checked="">
                                                <label class="custom-control-label" for="{{ type }}-check"
                                                       style="text-transform:capitalize;">{{ type }}</label>
                                            </div>
                                        {% endfor %}
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-4">
                                    <h5 class="pl-1 pl-sm-3 mb-3">Location</h5>
                                    <div class="form-group mx-5 mx-sm-2">
                                        {% for location in locations %}
                                            <div class="custom-control custom-checkbox">
                                                <input type="checkbox" class="custom-control-input"
                                                       id="{{ location }}-switch" name="locations"
                                                       checked="" value="{{ location }}">
                                                <label class="custom-control-label"
                                                       for="{{ location }}-switch">{{ location }}</label>
                                            </div>
                                        {% endfor %}
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-4">
                                    <label for="start-date"><h5 class="pl-1 pl-sm-3 mb-2">Start Date</h5></label>
                                    <div class="mx-5 mx-sm-0"><input class="form-control" name="start_date" type="date"
                                                                     value="{{ date }}"
                                                                     id="start-date"></div>
                                    <label for="end-date"><h5 class="pl-1 pl-sm-3 mb-2 mt-4">End Date</h5></label>
                                    <div class="mx-5 mx-sm-0">
                                        <input class="form-control" name="end_date" type="date" value="{{ date }}"
                                               id="end-date">
                                    </div>
                                </div>
                            </div>
                        </form>
                        <div class="text-right">
                            <button id="hide-adv-search" class="btn btn-link"><i class="fas fa-angle-up"
                                                                                 style="font-size: 24px"></i></button>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="img-search" role="tabpanel" aria-labelledby="img-search-tab">
                    <div id="normal-image-search">
                        <form name="searchForm" action="{{ url_for('index') }}" method="POST" novalidate>
                            {{ form.hidden_tag() }}
                            <input type="text" name="search_type" value="simple-img" hidden>
                            <div class="input-group mb-2 mt-2">
                                <div class="custom-file">
                                    <input type="file" name="img" class="custom-file-input" id="inp-img">
                                    <label class="custom-file-label" for="inp-img">Choose image</label>
                                </div>
                                <div class="input-group-append">
                                    <button class="btn btn-primary" value="submit" type="submit"><i
                                            class="fas fa-search text-light"></i></button>
                                </div>
                            </div>
                        </form>
                        <div class="text-right">
                            <button id="show-adv-image-search" class="btn btn-link"><i class="fas fa-angle-down"
                                                                                       style="font-size: 24px"></i>
                            </button>
                        </div>
                    </div>
                    <div id="advanced-image-search">
                        <form name="searchForm" action="{{ url_for('index') }}" method="POST" novalidate>
                            {{ form.hidden_tag() }}
                            <input type="text" name="search_type" value="adv-img" hidden>
                            <div class="input-group mb-3 mt-2">
                                <div class="custom-file">
                                    <input type="file" name="img" class="custom-file-input" id="inp-img">
                                    <label class="custom-file-label" for="inp-img">Choose image</label>
                                </div>
                                <div class="input-group-append">
                                    <button class="btn btn-primary" value="submit" type="submit"><i
                                            class="fas fa-search text-light"></i></button>
                                </div>
                            </div>
                            <div class="row pl-1 pr-1">
                                <div class="col-xs-12 col-sm-3">
                                    <h5 class="pl-1 pl-sm-3 mb-3">Type</h5>
                                    <div class="form-group mx-5 mx-sm-2">
                                        {% for type in types %}
                                            <div class="custom-control custom-switch">
                                                <input type="checkbox" class="custom-control-input"
                                                       id="{{ type }}-check" name="types" value="{{ type }}"
                                                       checked="">
                                                <label class="custom-control-label" for="{{ type }}-check"
                                                       style="text-transform:capitalize;">{{ type }}</label>
                                            </div>
                                        {% endfor %}
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-4">
                                    <h5 class="pl-1 pl-sm-3 mb-3">Location</h5>
                                    <div class="form-group mx-5 mx-sm-2">
                                        {% for location in locations %}
                                            <div class="custom-control custom-checkbox">
                                                <input type="checkbox" class="custom-control-input"
                                                       id="{{ location }}-switch" name="locations"
                                                       checked="" value="{{ location }}">
                                                <label class="custom-control-label"
                                                       for="{{ location }}-switch">{{ location }}</label>
                                            </div>
                                        {% endfor %}
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-4">
                                    <label for="start-date"><h5 class="pl-1 pl-sm-3 mb-2">Start Date</h5></label>
                                    <div class="mx-5 mx-sm-0"><input class="form-control" name="start_date" type="date"
                                                                     value="{{ date }}"
                                                                     id="start-date"></div>
                                    <label for="end-date"><h5 class="pl-1 pl-sm-3 mb-2 mt-4">End Date</h5></label>
                                    <div class="mx-5 mx-sm-0">
                                        <input class="form-control" name="end_date" type="date" value="{{ date }}"
                                               id="end-date">
                                    </div>
                                </div>
                            </div>
                        </form>
                        <div class="text-right">
                            <button id="hide-adv-image-search" class="btn btn-link"><i class="fas fa-angle-up"
                                                                                       style="font-size: 24px"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {#    <form method="POST" autocomplete="off">#}
    {#        <div class='col-xs-12 col-sm-12 col-md-10 col-lg-10'>#}
    {#            <div class='input-group'>#}
    {#                <input id="autocomplete" class='form-control' type='text' name='autocomplete'#}
    {#                       placeholder='Enter item location...'/>#}
    {#                <span class="input-group-btn">#}
    {#                <a href="{{ url_for('index', location='Himalaya') }}">#}
    {#                  <button id="searchBtn" type='submit' class='btn btn-default'>#}
    {#                    <span class='btn btn-primary'>Search</span>#}
    {#                  </button>#}
    {#                </a>#}
    {#            </span>#}
    {##}
    {#            </div>#}
    {#        </div>#}
    {#    </form>#}

    <div class="card-columns">
        {% for item in items %}
            <div class="card mb-3 item-card">
                <img class="card-img-top" src="{{ 'static/images/UploadedImages' + '/' + item.image_path }}"
                     alt="Card image cap">
                <div class="card-body">
                    <h2 class="card-title" style="text-transform:capitalize;">
                        {{ item.type }}
                    </h2>
                    <h4 class="card-text">{{ item.caption }}</h4>
                    <p></p>
                    <p class="card-text">
                    <div class="row">
                        <div class="col">
                            <h5>Location</h5>{{ item.location }}
                        </div>
                        <div class="col">
                            <h5>Date</h5>{{ item.timestamp.day }}-{{ item.timestamp.month }}-{{ item.timestamp.year }}
                        </div>
                        <div class="col">
                            <h5>Time</h5>{{ item.timestamp.hour }}:{{ item.timestamp.minute }}
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>

    <script src="static/js/feed.js"></script>
    <script>
        {% if session['theme'] == 'darkly' %}
            $('.item-card').hover(
                function () {
                    $(this).toggleClass('shadow');
                    $(this).toggleClass('bg-secondary');
                    $(this).toggleClass('border-secondary');
                }
            );
        {% else %}
            $('.item-card').hover(
                function () {
                    $(this).toggleClass('shadow');
                    $(this).toggleClass('bg-light');
                    $(this).toggleClass('border-secondary');
                }
            );
        {% endif %}
    </script>

    {#    <link rel="stylesheet" href="static/css/autocomplete.css" media="screen">#}
    {#    <script src="static/js/autocomplete.js"></script>#}
{% endblock %}